"use strict";(window["webpackJsonpPluginksk-heptacom-admin-open-auth"]=window["webpackJsonpPluginksk-heptacom-admin-open-auth"]||[]).push([[505],{505:function(e,n,t){t.r(n),t.d(n,{default:function(){return i}});var i={template:'{% block heptacom_admin_open_auth_client_rule_container %}\n    <div>\n        <sw-loader v-if="isLoading"></sw-loader>\n\n        <template v-else>\n            <heptacom-admin-open-auth-client-rule-item\n                v-for="rule in sortedRules"\n                :key="rule.id"\n                :rule="rule"\n                :client="client"\n                @conditions-deleted="conditionsDeleted"\n                @move-up="moveRuleUp(rule)"\n                @move-down="moveRuleDown(rule)"\n                @delete="deleteRule(rule)"\n            ></heptacom-admin-open-auth-client-rule-item>\n\n            <sw-alert\n                v-if="sortedRules.length === 0"\n                variant="warning"\n            >\n                {{ $t(\'heptacom-admin-open-auth-client.components.rule-container.warningEmpty\') }}\n            </sw-alert>\n\n            <sw-button\n                variant="ghost"\n                block\n                @click="addRule"\n            >\n                {{ $t(\'global.default.add\') }}\n            </sw-button>\n        </template>\n    </div>\n{% endblock %}\n',inject:["repositoryFactory","ruleConditionsConfigApiService"],props:{client:{required:!0,type:Object}},data(){return{isLoading:!1}},computed:{ruleRepository(){return this.repositoryFactory.create("heptacom_admin_open_auth_client_rule")},sortedRules(){return this.client.rules.sort((e,n)=>e.position-n.position)}},created(){this.createdComponent().then()},methods:{async createdComponent(){this.isLoading=!0,await this.loadConditionData(),this.isLoading=!1},async loadConditionData(){await this.ruleConditionsConfigApiService.load()},addRule(){let e=this.ruleRepository.create();e.clientId=this.client.id,e.position=this.client.rules.length,this.client.rules.add(e)},conditionsDeleted(e){this.$emit("conditions-deleted",e)},moveRuleUp(e){this.swapRules(e.position,e.position-1)},moveRuleDown(e){this.swapRules(e.position,e.position+1)},deleteRule(e){this.$emit("rule-deleted",e.id),this.client.rules.remove(e.id);let n=0;for(let e of this.sortedRules)e.position=n,n++},swapRules(e,n){let t=null,i=null;for(let o of this.client.rules){if(null===t&&o.position===e){t=o;continue}if(null===i&&o.position===n){i=o;continue}}null!==t&&null!==i&&(t.position=n,i.position=e)}}}}}]);
//# sourceMappingURL=a8aa6ab56c8ca3b1d7e8.js.map