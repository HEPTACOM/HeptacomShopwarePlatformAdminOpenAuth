"use strict";(window["webpackJsonpPluginksk-heptacom-admin-open-auth"]=window["webpackJsonpPluginksk-heptacom-admin-open-auth"]||[]).push([[431],{431:function(e,t,n){n.r(t),n.d(t,{default:function(){return i}});var i={template:'{% block heptacom_admin_open_auth_client_rule_container %}\n    <div>\n        <sw-loader v-if="isLoading"></sw-loader>\n\n        <template v-else>\n            <template\n                v-for="rule in sortedRules"\n                :key="rule.id"\n            >\n                <heptacom-admin-open-auth-client-rule-item\n                    :rule="rule"\n                    :client="client"\n                    :action="action"\n                    @conditions-deleted="conditionsDeleted"\n                    @move-up="moveRuleUp(rule)"\n                    @move-down="moveRuleDown(rule)"\n                    @delete="deleteRule(rule)"\n                ></heptacom-admin-open-auth-client-rule-item>\n            </template>\n\n            <sw-alert\n                v-if="sortedRules.length === 0"\n                variant="warning"\n            >\n                {{ $t(\'heptacom-admin-open-auth-client.components.rule-container.warningEmpty\') }}\n            </sw-alert>\n\n            <sw-button\n                variant="ghost"\n                block\n                @click="addRule"\n            >\n                {{ $t(\'global.default.add\') }}\n            </sw-button>\n        </template>\n    </div>\n{% endblock %}\n',inject:["repositoryFactory","ruleConditionsConfigApiService"],props:{client:{required:!0,type:Object},action:{required:!0,type:Array}},data(){return{isLoading:!1}},computed:{ruleRepository(){return this.repositoryFactory.create("heptacom_admin_open_auth_client_rule")},sortedRules(){return this.client.rules.filter(e=>e.actionName===this.action.name).sort((e,t)=>e.position-t.position)}},created(){this.createdComponent().then()},methods:{async createdComponent(){this.isLoading=!0,await this.loadConditionData(),this.isLoading=!1},async loadConditionData(){await this.ruleConditionsConfigApiService.load()},addRule(){let e=this.ruleRepository.create();e.clientId=this.client.id,e.actionName=this.action.name,e.actionConfig={},e.position=this.sortedRules.length,this.client.rules.add(e)},conditionsDeleted(e){this.$emit("conditions-deleted",e)},moveRuleUp(e){this.swapRules(e.position,e.position-1)},moveRuleDown(e){this.swapRules(e.position,e.position+1)},deleteRule(e){this.$emit("rule-deleted",e.id),this.client.rules.remove(e.id);let t=0;for(let e of this.sortedRules)e.position=t,t++},swapRules(e,t){let n=null,i=null;for(let o of this.sortedRules){if(null===n&&o.position===e){n=o;continue}if(null===i&&o.position===t){i=o;continue}}null!==n&&null!==i&&(n.position=t,i.position=e)}}}}}]);
//# sourceMappingURL=67d3c04ebbe854fc6b82.js.map